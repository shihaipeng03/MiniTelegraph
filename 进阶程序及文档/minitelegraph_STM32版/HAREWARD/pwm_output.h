#ifndef __PWM_OUTPUT_H
#define __PWM_OUTPUT_H

#include "sys.h"

/*
**GPIOB
**PWM1 GPIO_Pin_6
**PWM2 GPIO_Pin_7
**PWM3 GPIO_Pin_8
**PWM4 GPIO_Pin_9
*/
static u8 chars[][8] ={ 
{ 0, 0, 63, 68, 68, 68, 63, 0 },
{ 0, 0, 127, 73, 73, 73, 6, 0 },
{ 0, 0, 127, 73, 73, 73, 54, 0 },
{ 0, 0, 127, 64, 64, 64, 0, 0 },
{ 0, 3, 62, 66, 66, 62, 3, 0 },
{ 0, 0, 127, 73, 73, 73, 0, 0 },
{ 0, 99, 20, 8, 127, 8, 20, 99 },
{ 0, 0, 73, 73, 73, 54, 0, 0 },
{ 0, 127, 2, 4, 8, 16, 127, 0 },
{ 0, 127, 2, 100, 72, 16, 127, 0 },
{ 0, 0, 127, 8, 8, 20, 99, 0 },
{ 0, 0, 31, 32, 64, 64, 127, 0 },
{ 0, 127, 64, 48, 8, 48, 64, 127 },
{ 0, 0, 127, 8, 8, 8, 127, 0 },
{ 0, 0, 62, 65, 65, 65, 62, 0 },
{ 0, 0, 127, 64, 64, 64, 127, 0 },
{ 0, 0, 127, 68, 68, 68, 56, 0 },
{ 0, 0, 62, 65, 65, 65, 0, 0 },
{ 0, 0, 64, 64, 127, 64, 64, 0 },
{ 0, 0, 113, 9, 9, 9, 126, 0 },
{ 0, 56, 68, 68, 127, 68, 68, 56 },
{ 0, 0, 99, 20, 8, 20, 99, 0 },
{ 0, 0, 126, 2, 2, 2, 127, 1 },
{ 0, 0, 120, 8, 8, 127, 0, 0 },
{ 0, 127, 1, 1, 31, 1, 1, 127 },
{ 0, 126, 2, 2, 62, 2, 3, 127 },
{ 0, 64, 64, 127, 9, 9, 9, 6 },
{ 0, 127, 9, 9, 9, 6, 0, 127 },
{ 0, 0, 127, 9, 9, 9, 6, 0 },
{ 0, 0, 65, 65, 73, 73, 62, 0 },
{ 0, 127, 8, 62, 65, 65, 65, 62 },
{ 0, 0, 51, 76, 72, 72, 127, 0 },
{ 0, 0, 0, 0, 0, 0, 0, 0 },
{ 0, 0, 125, 0, 0, 0, 0, 0 }, //!
{ 0, 0, 0, 48, 0, 48, 0, 0 }, //"
{ 0, 0, 18, 63, 18, 18, 63, 18 }, //#
{ 0, 0, 50, 73, 127, 73, 38, 0 }, //$
{ 0, 32, 81, 38, 8, 50, 69, 2 }, //%
{ 0, 0, 54, 85, 73, 69, 34, 5 }, //&
{ 0, 0, 0, 64, 112, 0, 0, 0 }, //'
{ 0, 0, 0, 62, 65, 0, 0, 0 }, //(
{ 0, 0, 0, 0, 65, 62, 0, 0 }, //)
{ 0, 0, 42, 28, 8, 28, 42, 0 }, //* */
{ 0, 0, 8, 8, 62, 8, 8, 0 }, //+
{ 0, 0, 0, 5, 6, 0, 0, 0 }, //,
{ 0, 0, 8, 8, 8, 8, 8, 0 }, //-
{ 0, 0, 3, 3, 0, 0, 0, 0 }, //.
{ 0, 0, 1, 6, 8, 48, 64, 0 }, ///
{ 0, 0, 62, 69, 73, 81, 62, 0 }, //0 
{ 0, 0, 0, 33, 127, 1, 0, 0 }, //1
{ 0, 0, 35, 69, 73, 49, 0, 0 }, //2
{ 0, 0, 73, 73, 73, 54, 0, 0 },
{ 0, 0, 120, 8, 8, 127, 8, 0 },
{ 0, 0, 0, 121, 73, 73, 70, 0 },
{ 0, 0, 62, 73, 73, 73, 6, 0 },
{ 0, 0, 0, 67, 68, 72, 112, 0 },
{ 0, 0, 54, 73, 73, 73, 54, 0 }, //8
{ 0, 0, 48, 73, 73, 73, 62, 0 }, //9
{ 0, 0, 0, 36, 36, 0, 0, 0 }, //:
{ 0, 0, 37, 38, 0, 0, 0, 0 }, //;
{ 0, 0, 8, 20, 34, 0, 0, 0 }, //<
{ 0, 0, 18, 18, 18, 18, 18, 0 }, //=
{ 0, 0, 0, 0, 34, 20, 8, 0 }, //>
{ 0, 0, 0, 64, 77, 72, 48, 0 }, //?
{ 0, 0, 62, 65, 93, 85, 60, 0 }, //@
{ 0, 0, 63, 68, 68, 68, 63, 0 }, //A
{ 0, 0, 127, 73, 73, 73, 54, 0 },
{ 0, 0, 62, 65, 65, 65, 0, 0 },
{ 0, 0, 127, 65, 65, 65, 62, 0 },
{ 0, 0, 127, 73, 73, 73, 0, 0 },
{ 0, 0, 127, 72, 72, 72, 0, 0 },
{ 0, 0, 62, 65, 73, 73, 14, 0 },
{ 0, 0, 127, 8, 8, 8, 127, 0 },
{ 0, 0, 0, 65, 127, 65, 0, 0 },
{ 0, 0, 0, 65, 65, 126, 0, 0 },
{ 0, 0, 127, 8, 8, 20, 99, 0 },
{ 0, 0, 127, 1, 1, 1, 0, 0 }, //L
{ 0, 127, 64, 48, 8, 48, 64, 127 }, //M
{ 0, 0, 127, 32, 28, 2, 127, 0 },
{ 0, 0, 62, 65, 65, 65, 62, 0 },
{ 0, 0, 127, 68, 68, 68, 56, 0 },
{ 0, 0, 62, 65, 65, 71, 63, 1 },
{ 0, 0, 127, 72, 72, 76, 51, 0 },
{ 0, 0, 48, 73, 73, 73, 6, 0 },
{ 0, 0, 64, 64, 127, 64, 64, 0 },
{ 0, 0, 126, 1, 1, 1, 126, 0 },
{ 0, 0, 124, 2, 1, 2, 124, 0 },
{ 0, 120, 6, 1, 14, 1, 6, 120 },
{ 0, 0, 99, 20, 8, 20, 99, 0 },
{ 0, 0, 96, 16, 15, 16, 96, 0 },
{ 0, 0, 67, 69, 73, 113, 0, 0 }, //Z
{ 0, 0, 127, 65, 65, 0, 0, 0 }, //[
{ 0, 0, 0, 112, 8, 7, 0, 0 }, /* ///\*/
{ 0, 0, 0, 65, 65, 127, 0, 0 }, //]
{ 0, 0, 48, 64, 48, 0, 0, 0 }, //^
{ 0, 0, 1, 1, 1, 1, 1, 0 }, //_
{ 0, 0, 64, 48, 0, 0, 0, 0 }, //`
{ 0, 0, 6, 41, 41, 41, 31, 0 }, //a
{ 0, 0, 127, 9, 9, 9, 6, 0 }, //b
{ 0, 0, 14, 17, 17, 17, 0, 0 },
{ 0, 0, 6, 9, 9, 9, 127, 0 },
{ 0, 0, 30, 37, 37, 37, 25, 0 },
{ 0, 0, 8, 63, 72, 72, 0, 0 },
{ 0, 0, 25, 37, 37, 37, 30, 0 },
{ 0, 0, 127, 8, 8, 8, 7, 0 },
{ 0, 0, 0, 0, 47, 0, 0, 0 },
{ 0, 0, 1, 1, 94, 0, 0, 0 },
{ 0, 0, 127, 4, 4, 27, 0, 0 },
{ 0, 0, 0, 64, 127, 0, 0, 0 },
{ 0, 15, 16, 16, 15, 16, 16, 15 },
{ 0, 0, 31, 16, 16, 16, 15, 0 },
{ 0, 0, 14, 17, 17, 17, 14, 0 },
{ 0, 0, 63, 72, 72, 48, 0, 0 },
{ 0, 0, 24, 36, 36, 31, 0, 0 },
{ 0, 0, 15, 16, 16, 8, 0, 0 },
{ 0, 0, 8, 21, 21, 21, 2, 0 },
{ 0, 0, 0, 8, 31, 9, 0, 0 },
{ 0, 0, 30, 1, 1, 1, 31, 0 },
{ 0, 0, 28, 2, 1, 2, 28, 0 },
{ 0, 30, 1, 2, 4, 2, 1, 30 },
{ 0, 0, 17, 10, 4, 10, 17, 0 },
{ 0, 0, 0, 25, 5, 5, 30, 0 }, //y
{ 0, 0, 19, 21, 21, 25, 0, 0 }, //z
{ 0, 0, 8, 54, 65, 0, 0, 0 }, //{
{ 0, 0, 0, 0, 119, 0, 0, 0 }, //|
{ 0, 0, 0, 0, 65, 54, 8, 0 }, //}
{ 0, 8, 16, 16, 8, 4, 4, 8 }, //~
{ 0, 0, 0, 0, 0, 0, 0, 0 } // 
};

static char Hzk[][32]={

{0x10,0x40,0x10,0x80,0x91,0x00,0x77,0xFF,0x19,0x01,0x00,0xC2,0x7E,0x04,0x42,0x18,
0x43,0xE0,0x42,0x00,0x42,0x00,0x43,0xFC,0x42,0x02,0x7E,0x02,0x00,0x1E,0x00,0x00},/*"祝",0*/
/* (16 X 16 , ?? ) */

{0x04,0x01,0x04,0x01,0x04,0x02,0x04,0x04,0x04,0x08,0x04,0x30,0x04,0xC0,0xFF,0x00,
0x04,0xC0,0x04,0x30,0x04,0x08,0x04,0x04,0x04,0x02,0x04,0x01,0x04,0x01,0x00,0x00},/*"大",1*/
/* (16 X 16 , ?? ) */

{0x08,0x02,0x34,0x92,0x24,0x92,0x24,0x94,0x25,0x24,0x25,0x28,0xA6,0x4A,0x65,0x91,
0x24,0xFE,0x24,0x20,0x24,0x50,0x24,0x88,0x25,0x08,0x2C,0x04,0x30,0x04,0x00,0x00},/*"家",2*/
/* (16 X 16 , ?? ) */

{0x02,0x04,0x22,0x48,0x2A,0x52,0xA6,0x41,0x63,0xFE,0x26,0x40,0x2A,0x50,0x22,0x49,
0x00,0x06,0x3F,0xF8,0x22,0x00,0x22,0x00,0x23,0xFF,0x42,0x00,0x02,0x00,0x00,0x00},/*"新",3*/
/* (16 X 16 , ?? ) */

{0x00,0x20,0x04,0x20,0x18,0x20,0xE3,0xE0,0x22,0x20,0x22,0x20,0x22,0x20,0x22,0x20,
0x3F,0xFF,0x22,0x20,0x22,0x20,0x22,0x20,0x22,0x20,0x20,0x20,0x00,0x20,0x00,0x00},/*"年",4*/
/* (16 X 16 , ?? ) */

{0x00,0x80,0x07,0x00,0x00,0x00,0xFF,0xFF,0x08,0x00,0x04,0x81,0x10,0x82,0x10,0x8C,
0x10,0xB0,0xFF,0xC0,0x10,0xB0,0x10,0x8C,0x1F,0x82,0x00,0x81,0x00,0x81,0x00,0x00},/*"快",5*/
/* (16 X 16 , ?? ) */

{0x00,0x00,0x00,0x04,0x07,0x08,0x39,0x10,0x21,0x60,0x21,0x02,0x21,0x01,0x2F,0xFE,
0x41,0x00,0x41,0x00,0xC1,0x40,0x41,0x20,0x01,0x10,0x01,0x0C,0x00,0x00,0x00,0x00},/*"乐",6*/
/* (16 X 16 , ?? ) */

{0x20,0x01,0x20,0x02,0x20,0x04,0x20,0x18,0x20,0x60,0x3F,0x80,0x22,0x00,0x22,0x00,
0x22,0x02,0x22,0x01,0x22,0x02,0x23,0xFC,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00},/*"万",7*/
/* (16 X 16 , ?? ) */

{0x20,0x20,0x20,0x20,0x2E,0xA8,0x2A,0xA8,0x2A,0xA8,0x2A,0xAA,0x2A,0xA9,0xFF,0xFE,
0x2A,0xA8,0x2A,0xA8,0x2A,0xA8,0x2A,0xA8,0x2E,0xF8,0x20,0x20,0x20,0x20,0x00,0x00},/*"事",8*/
/* (16 X 16 , ?? ) */

{0x08,0x01,0x08,0x82,0x0F,0x44,0xF8,0x28,0x08,0x10,0x08,0x68,0x0F,0x86,0x00,0x00,
0x00,0x00,0x1F,0xFE,0x10,0x04,0x10,0x04,0x10,0x04,0x1F,0xFE,0x00,0x00,0x00,0x00},/*"如",9*/
/* (16 X 16 , ?? ) */

{0x08,0x02,0x08,0x0C,0x48,0x00,0x4B,0xEE,0x6A,0xA1,0x5A,0xA1,0x4A,0xB1,0xCA,0xAD,
0x4A,0xA1,0x5A,0xA1,0x6A,0xA1,0x4B,0xE7,0x48,0x00,0x08,0x08,0x08,0x06,0x00,0x00},/*"意",10*/
/* (16 X 16 , ?? ) */

{0x00,0x02,0x00,0x42,0x00,0x42,0x3F,0xC4,0x2A,0x44,0x6A,0x44,0xAA,0x48,0x2A,0x48,
0x2A,0x50,0x2A,0x62,0x2A,0x41,0x3F,0xFE,0x00,0x80,0x01,0x00,0x02,0x00,0x00,0x00},/*"身",11*/
/* (16 X 16 , ?? ) */

{0x00,0x80,0x01,0x00,0x06,0x00,0x1F,0xFF,0xE0,0x08,0x08,0x10,0x08,0x20,0x08,0xD0,
0x0B,0x10,0xFF,0xFF,0x0B,0x10,0x08,0xD0,0x08,0x20,0x08,0x10,0x00,0x08,0x00,0x00},/*"体",12*/
/* (16 X 16 , ?? ) */

{0x01,0x00,0x06,0x00,0x1F,0xFF,0xE0,0x01,0x10,0x92,0x13,0x8C,0x1C,0xF4,0x08,0x12,
0x2A,0x92,0x2A,0x92,0xFF,0xFE,0x2A,0x92,0x2A,0x92,0x3E,0x92,0x08,0x12,0x00,0x00},/*"健",13*/
/* (16 X 16 , ?? ) */

{0x00,0x02,0x00,0x0C,0x3F,0xF0,0x22,0x02,0x2A,0xC4,0x2A,0xA8,0x2A,0x92,0xAA,0x81,
0x7F,0xFE,0x2A,0xA0,0x2A,0x90,0x2A,0x88,0x2F,0x94,0x22,0x22,0x22,0x02,0x00,0x00},/*"康",14*/
/* (16 X 16 , ?? ) */

{0x00,0x00,0x1F,0xFF,0x80,0x00,0x64,0x04,0x14,0xBC,0x15,0xA4,0x56,0xBC,0x7C,0xA4,
0x54,0xBC,0x55,0xA4,0x54,0xBC,0x44,0x06,0x40,0x01,0x7F,0xFE,0x00,0x00,0x00,0x00},/*"阖",15*/
/* (16 X 16 , ?? ) */

{0x08,0x02,0x34,0x92,0x24,0x92,0x24,0x94,0x25,0x24,0x25,0x28,0xA6,0x4A,0x65,0x91,
0x24,0xFE,0x24,0x20,0x24,0x50,0x24,0x88,0x25,0x08,0x2C,0x04,0x30,0x04,0x00,0x00},/*"家",16*/
/* (16 X 16 , ?? ) */

{0x04,0x10,0x04,0x10,0x24,0x90,0x24,0x90,0x26,0x90,0x25,0x90,0x24,0x90,0xFC,0xFF,
0x24,0x90,0x25,0x90,0x26,0x90,0x24,0x90,0x24,0x90,0x04,0x10,0x04,0x10,0x00,0x00},/*"幸",17*/
/* (16 X 16 , ?? ) */

{0x10,0x40,0x90,0x80,0x73,0xFF,0x1D,0x00,0x10,0xC0,0x00,0x00,0x40,0xFF,0x5E,0x92,
0x52,0x92,0x52,0x92,0x52,0xFE,0x52,0x92,0x52,0x92,0x5E,0x92,0x40,0xFF,0x00,0x00},/*"福",18*/
/* (16 X 16 , ?? ) */

};

#define DOT_UP_DELAY 80 //打点等待时间 //80
#define DOT_DOWN_DELAY 50 //打点等待时间，符合舵机动作幅度时间，延时过小导致无法达到 50
#define DOT_UP 1545 //打点舵机提升到的位置，让笔刚好贴到纸上，不能过高//1565
#define DOT_DOWN 1700 //下降后的位置

#define SERVO_MIN 1300 //写字舵机的字顶部位置
#define SERVO_MAX 1800 //底部位置
#define SERVO_STEPS 21 //字符高度，数值越小，字符越大，建议范围（10-30）//15

#define LINE_TAB 4 //字符的基线，过大会超过纸的高度//5  
#define SERVO_STEP (SERVO_MAX - SERVO_MIN) / SERVO_STEPS
#define SERVO_DELAY SERVO_STEP*3//5
#define STEPPER_STEP 600 / SERVO_STEPS

#define Servo_Dot 1
#define Servo_Arm 2

#define PWM_Padding(x,Speed)   switch(x){\
					     case 1: 	TIM4->CCR1 = Speed; break;\
						 case 2:	TIM4->CCR2 = Speed; break;}


void TIM4_PWM_Init(void);
void dot(int m);//打一个点
void printLine(int b);//画一条连续的线 8*8使用
void printLine16(int b);//画一条连续的线 16*16使用
void printChar(char c);//打印一个字符
void printString(char* str);//打印一串字符
void printChinese(u8 no); //打印一串字符


#endif
